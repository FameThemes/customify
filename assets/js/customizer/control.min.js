!function(a){var b=wp.customize;b.bind("pane-contents-reflowed",function(){var c=[];b.section.each(function(a){"customify_section"===a.params.type&&void 0!==a.params.section&&c.push(a)}),c.sort(b.utils.prioritySort).reverse(),a.each(c,function(b,c){a("#sub-accordion-section-"+c.params.section).children(".section-meta").after(c.headContainer)});var d=[];b.panel.each(function(a){"customify_panel"===a.params.type&&void 0!==a.params.panel&&d.push(a)}),d.sort(b.utils.prioritySort).reverse(),a.each(d,function(b,c){a("#sub-accordion-panel-"+c.params.panel).children(".panel-meta").after(c.headContainer)})});var c=wp.customize.Panel.prototype.embed,d=wp.customize.Panel.prototype.isContextuallyActive,e=wp.customize.Panel.prototype.attachEvents;wp.customize.Panel=wp.customize.Panel.extend({attachEvents:function(){if("customify_panel"!==this.params.type||void 0===this.params.panel)return void e.call(this);e.call(this);var a=this;a.expanded.bind(function(c){var d=b.panel(a.params.panel);c?d.contentContainer.addClass("current-panel-parent"):d.contentContainer.removeClass("current-panel-parent")}),a.container.find(".customize-panel-back").off("click keydown").on("click keydown",function(c){b.utils.isKeydownButNotEnterEvent(c)||(c.preventDefault(),a.expanded()&&b.panel(a.params.panel).expand())})},embed:function(){if("customify_panel"!==this.params.type||void 0===this.params.panel)return void c.call(this);c.call(this);var b=this;a("#sub-accordion-panel-"+this.params.panel).append(b.headContainer)},isContextuallyActive:function(){if("customify_panel"!==this.params.type)return d.call(this);var a=this,c=this._children("panel","section");b.panel.each(function(b){b.params.panel&&b.params.panel===a.id&&c.push(b)}),c.sort(b.utils.prioritySort);var e=0;return _(c).each(function(a){a.active()&&a.isContextuallyActive()&&(e+=1)}),0!==e}});var f=wp.customize.Section.prototype.embed,g=wp.customize.Section.prototype.isContextuallyActive,h=wp.customize.Section.prototype.attachEvents;wp.customize.Section=wp.customize.Section.extend({attachEvents:function(){if("customify_section"!==this.params.type||void 0===this.params.section)return void h.call(this);h.call(this);var a=this;a.expanded.bind(function(c){var d=b.section(a.params.section);c?d.contentContainer.addClass("current-section-parent"):d.contentContainer.removeClass("current-section-parent")}),a.container.find(".customize-section-back").off("click keydown").on("click keydown",function(c){b.utils.isKeydownButNotEnterEvent(c)||(c.preventDefault(),a.expanded()&&b.section(a.params.section).expand())})},embed:function(){if("customify_section"!==this.params.type||void 0===this.params.section)return void f.call(this);f.call(this);var b=this;a("#sub-accordion-section-"+this.params.section).append(b.headContainer)},isContextuallyActive:function(){if("customify_section"!==this.params.type)return g.call(this);var a=this,c=this._children("section","control");b.section.each(function(b){b.params.section&&b.params.section===a.id&&c.push(b)}),c.sort(b.utils.prioritySort);var d=0;return _(c).each(function(a){void 0!==a.isContextuallyActive?a.active()&&a.isContextuallyActive()&&(d+=1):a.active()&&(d+=1)}),0!==d}})}(jQuery),function(a,b){"use strict";var c=a(document),d={setAttachment:function(a){this.attachment=a},addParamsURL:function(b,c){return a.isEmptyObject(c)||(b+=(b.indexOf("?")>=0?"&":"?")+a.param(c)),b},getThumb:function(a){var b=this;void 0!==a&&(this.attachment=a);var c=(new Date).getTime();return void 0!==this.attachment.sizes&&void 0!==this.attachment.sizes.medium?b.addParamsURL(this.attachment.sizes.medium.url,{t:c}):b.addParamsURL(this.attachment.url,{t:c})},getURL:function(a){void 0!==a&&(this.attachment=a);var b=(new Date).getTime();return this.addParamsURL(this.attachment.url,{t:b})},getID:function(a){return void 0!==a&&(this.attachment=a),this.attachment.id},getInputID:function(b){a(".attachment-id",this.preview).val()},setPreview:function(a){this.preview=a},insertImage:function(b){void 0!==b&&(this.attachment=b);var c=this.getURL(),d=this.getID(),e=this.attachment.mime;a(".customify-image-preview",this.preview).addClass("customify--has-file").html('<img src="'+c+'" alt="">'),a(".attachment-url",this.preview).val(this.toRelativeUrl(c)),a(".attachment-mime",this.preview).val(e),a(".attachment-id",this.preview).val(d).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},toRelativeUrl:function(a){return a},showChangeBtn:function(){a(".customify--add",this.preview).addClass("customify--hide"),a(".customify--change",this.preview).removeClass("customify--hide"),a(".customify--remove",this.preview).removeClass("customify--hide")},insertVideo:function(b){void 0!==b&&(this.attachment=b);var c=this.getURL(),d=this.getID(),e=this.attachment.mime,f='<video width="100%" height="" controls><source src="'+c+'" type="'+e+'">Your browser does not support the video tag.</video>';a(".customify-image-preview",this.preview).addClass("customify--has-file").html(f),a(".attachment-url",this.preview).val(this.toRelativeUrl(c)),a(".attachment-mime",this.preview).val(e),a(".attachment-id",this.preview).val(d).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},insertFile:function(b){void 0!==b&&(this.attachment=b);var c=b.url,d=this.attachment.mime,e=c.replace(/^.*[\\\/]/,"");a(".customify-image-preview",this.preview).addClass("customify--has-file").html('<a href="'+c+'" class="attachment-file" target="_blank">'+e+"</a>"),a(".attachment-url",this.preview).val(this.toRelativeUrl(c)),a(".attachment-mime",this.preview).val(d),a(".attachment-id",this.preview).val(this.getID()).trigger("change"),this.preview.addClass("attachment-added"),this.showChangeBtn()},remove:function(b){void 0!==b&&(this.preview=b),a(".customify-image-preview",this.preview).removeAttr("style").html("").removeClass("customify--has-file"),a(".attachment-url",this.preview).val(""),a(".attachment-mime",this.preview).val(""),a(".attachment-id",this.preview).val("").trigger("change"),this.preview.removeClass("attachment-added"),a(".customify--add",this.preview).removeClass("customify--hide"),a(".customify--change",this.preview).addClass("customify--hide"),a(".customify--remove",this.preview).addClass("customify--hide")}};d.controlMediaImage=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"image"}}),d.controlMediaImage.on("select",function(){var a=d.controlMediaImage.state().get("selection").first().toJSON();d.insertImage(a)}),d.controlMediaVideo=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1,library:{type:"video"}}),d.controlMediaVideo.on("select",function(){var a=d.controlMediaVideo.state().get("selection").first().toJSON();d.insertVideo(a)}),d.controlMediaFile=wp.media({title:wp.media.view.l10n.addMedia,multiple:!1}),d.controlMediaFile.on("select",function(){var a=d.controlMediaFile.state().get("selection").first().toJSON();d.insertFile(a)});var e={},f={devices:["desktop","tablet","mobile"],allDevices:["desktop","tablet","mobile"],type:"customify",getTemplate:_.memoize(function(){var b,c=this,d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,f,g){return _.isUndefined(f)&&(f="tmpl-customize-control-"+c.type),!_.isUndefined(g)&&_.isString(g)?d.variable=g:d.variable="data",(b=_.template(a("#"+f).html(),null,d))(e)}}),getFieldValue:function(b,c,d){var e=this,f=void 0,g=!1;_.isUndefined(c)||(f=c.type,g=c.device_settings);var h="";switch(f){case"media":case"image":case"video":case"attachment":case"audio":g?(h={},_.each(e.allDevices,function(c){var e=b+"-"+c;h[c]={id:a('input[data-name="'+e+'"]',d).val(),url:a('input[data-name="'+e+'-url"]',d).val(),mime:a('input[data-name="'+e+'-mime"]',d).val()}})):h={id:a('input[data-name="'+b+'"]',d).val(),url:a('input[data-name="'+b+'-url"]',d).val(),mime:a('input[data-name="'+b+'-mime"]',d).val()};break;case"css_ruler":g?(h={},_.each(e.allDevices,function(c){var e=b+"-"+c;h[c]={unit:a('input[data-name="'+e+'-unit"]:checked',d).val(),top:a('input[data-name="'+e+'-top"]',d).val(),right:a('input[data-name="'+e+'-right"]',d).val(),bottom:a('input[data-name="'+e+'-bottom"]',d).val(),left:a('input[data-name="'+e+'-left"]',d).val(),link:a('input[data-name="'+e+'-link"]',d).is(":checked")?1:""}})):h={unit:a('input[data-name="'+b+'-unit"]:checked',d).val(),top:a('input[data-name="'+b+'-top"]',d).val(),right:a('input[data-name="'+b+'-right"]',d).val(),bottom:a('input[data-name="'+b+'-bottom"]',d).val(),left:a('input[data-name="'+b+'-left"]',d).val(),link:a('input[data-name="'+b+'-link"]',d).is(":checked")?1:""};break;case"shadow":g?(h={},_.each(e.allDevices,function(c){var e=b+"-"+c;h[c]={color:a('input[data-name="'+e+'-color"]',d).val(),x:a('input[data-name="'+e+'-x"]',d).val(),y:a('input[data-name="'+e+'-y"]',d).val(),blur:a('input[data-name="'+e+'-blur"]',d).val(),spread:a('input[data-name="'+e+'-spread"]',d).val(),inset:!!a('input[data-name="'+e+'-inset"]',d).is(":checked")&&1}})):h={color:a('input[data-name="'+b+'-color"]',d).val(),x:a('input[data-name="'+b+'-x"]',d).val(),y:a('input[data-name="'+b+'-y"]',d).val(),blur:a('input[data-name="'+b+'-blur"]',d).val(),spread:a('input[data-name="'+b+'-spread"]',d).val(),inset:!!a('input[data-name="'+b+'-inset"]',d).is(":checked")&&1};break;case"font_style":g?(h={},_.each(e.allDevices,function(c){var e=b+"-"+c;h[c]={b:a('input[data-name="'+e+'-b"]',d).is(":checked")?1:"",i:a('input[data-name="'+e+'-i"]',d).is(":checked")?1:"",u:a('input[data-name="'+e+'-u"]',d).is(":checked")?1:"",s:a('input[data-name="'+e+'-s"]',d).is(":checked")?1:"",t:a('input[data-name="'+e+'-t"]',d).is(":checked")?1:""}})):h={b:a('input[data-name="'+b+'-b"]',d).is(":checked")?1:"",i:a('input[data-name="'+b+'-i"]',d).is(":checked")?1:"",u:a('input[data-name="'+b+'-u"]',d).is(":checked")?1:"",s:a('input[data-name="'+b+'-s"]',d).is(":checked")?1:"",t:a('input[data-name="'+b+'-t"]',d).is(":checked")?1:""};break;case"font":if(g)h={},_.each(e.allDevices,function(c){var e=b+"-"+c,f={};a('.list-subsets[data-name="'+e+'-subsets"] input',d).each(function(){if(a(this).is(":checked")){var b=a(this).val();f[b]=b}}),h[c]={font:a('select[data-name="'+e+'-font"]',d).val(),type:a('input[data-name="'+e+'-type"]',d).val(),variant:a('select[data-name="'+e+'-variant"]',d).val(),subsets:f}});else{var i={};a('.list-subsets[data-name="'+b+'-subsets"] input',d).each(function(){if(a(this).is(":checked")){var b=a(this).val();i[b]=b}}),h={font:a('select[data-name="'+b+'-font"]',d).val(),type:a('input[data-name="'+b+'-type"]',d).val(),variant:a('select[data-name="'+b+'-variant"]',d).val(),subsets:i}}break;case"slider":g?(h={},_.each(e.allDevices,function(c){var e=b+"-"+c;h[c]={unit:a('input[data-name="'+e+'-unit"]:checked',d).val(),value:a('input[data-name="'+e+'-value"]',d).val()}})):h={unit:a('input[data-name="'+b+'-unit"]:checked',d).val(),value:a('input[data-name="'+b+'-value"]',d).val()};break;case"icon":g?(h={},_.each(e.allDevices,function(c){var e=b+"-"+c;h[c]={type:a('input[data-name="'+e+'-type"]',d).val(),icon:a('input[data-name="'+e+'"]',d).val()}})):h={type:a('input[data-name="'+b+'-type"]',d).val(),icon:a('input[data-name="'+b+'"]',d).val()};break;case"radio":case"text_align":case"text_align_no_justify":g?(h={},_.each(e.allDevices,function(c){var e=a('input[data-name="'+b+"-"+c+'"]:checked',d);h[c]=e.length?e.val():""})):h=a('input[data-name="'+b+'"]:checked',d).val();break;case"checkbox":g?(h={},_.each(e.allDevices,function(c){h[c]=a('input[data-name="'+b+"-"+c+'"]',d).is(":checked")?1:""})):h=a('input[data-name="'+b+'"]',d).is(":checked")?1:"";break;case"checkboxes":h={},g?_.each(e.allDevices,function(c){h[c]={},a('input[data-name="'+b+"-"+c+'"]',d).each(function(){var b=a(this).val();a(this).is(":checked")&&(h[b]=b)})}):a('input[data-name="'+b+'"]',d).each(function(){var b=a(this).val();a(this).is(":checked")&&(h[b]=b)});break;case"typography":case"modal":case"styling":g?(h={},_.each(e.allDevices,function(c){h[c]=a('[data-name="'+b+"-"+c+'"]',d).val()})):h=a('[data-name="'+b+'"]',d).val();try{h=JSON.parse(h)}catch(a){}break;default:g?(h={},_.each(e.allDevices,function(c){h[c]=a('[data-name="'+b+"-"+c+'"]',d).val()})):h=a('[data-name="'+b+'"]',d).val()}return h},getValue:function(b,c){var d=this,e="";switch(b.type){case"group":e={},b.device_settings?_.each(d.allDevices,function(f){var g=a(".customify-group-device-fields.customify--for-"+f,c);e[f]={};var h={};_.each(b.fields,function(b){var c=a('.customify--group-field[data-field-name="'+b.name+'"]',g);h[b.name]=d.getFieldValue(b.name,b,c)}),e[f]=h,d.initConditional(g,h)}):(_.each(b.fields,function(b){var f=a('.customify--group-field[data-field-name="'+b.name+'"]',c);e[b.name]=d.getFieldValue(b.name,b,f)}),d.initConditional(c,e));break;case"repeater":e=[],a(".customify--repeater-item",c).each(function(c){var f=a(this),g={};_.each(b.fields,function(c){var e=a('[data-field-name="'+c.name+'"]',f),h=d.getFieldValue(c.name,c,f);g[c.name]=h,b.live_title_field==c.name&&("select"==e.prop("tagName")?h=a('option[value="'+h+'"]').first().text():(_.isUndefined(h)||""==h)&&(h=Customify_Control_Args.untitled),d.updateRepeaterLiveTitle(h,f,c))}),d.initConditional(f,g),e[c]=g,e[c]._visibility="visible",a("input.r-visible-input",f).length&&(a("input.r-visible-input",f).is(":checked")||(e[c]._visibility="hidden"))});break;default:e=this.getFieldValue(b.name,b,c)}return e},encodeValue:function(a){return encodeURI(JSON.stringify(a))},decodeValue:function(a){return JSON.parse(decodeURI(a))},updateRepeaterLiveTitle:function(b,c,d){a(".customify--repeater-live-title",c).text(b)},compare:function(a,b,c){var d=!1;switch(b){case"===":d=a===c;break;case">":d=a>c;break;case"<":d=a<c;break;case"!=":d=a!=c;break;case"empty":var e=_.clone(a);_.isObject(e)||_.isArray(e)?(_.each(e,function(a,b){_.isEmpty(a)&&delete e[b]}),d=!!_.isEmpty(e)):d=!(!_.isNull(e)&&""!=e);break;case"not_empty":var e=_.clone(a);(_.isObject(e)||_.isArray(e))&&_.each(e,function(a,b){_.isEmpty(a)&&delete e[b]}),d=!_.isEmpty(e);break;default:d=_.isArray(c)?!_.isEmpty(c)&&!_.isEmpty(a)&&_.contains(c,a):a==c}return d},multiple_compare:function(a,b,c){_.isUndefined(c)&&(c=!1);var d=this,e=!1;try{var f=a[0];if(_.isString(f)){e=!1;var g=a[1],h=a[2],i=!1;_.isUndefined(a[3])||(i=a[3]);var j;if(!_.isUndefined(b[f])){j=b[f],i&&_.isObject(j)&&!_.isUndefined(j[i])&&(j=j[i]);try{c&&(j=d.decodeValue(j))}catch(a){}e=d.compare(j,g,h)}}else _.isArray(f)&&(e=!0,_.each(a,function(a){var f=a[0],g=a[1],h=a[2],i=!1;_.isUndefined(a[3])||(i=a[3]);var j=b[f];if(_.isUndefined(j)&&(j=""),c&&_.isString(j))try{j=d.decodeValue(j)}catch(a){}i&&_.isObject(j)&&!_.isUndefined(j[i])&&(j=j[i]),d.compare(j,g,h)||(e=!1)}))}catch(a){}return e},initConditional:function(b,c){var d=this;a(".customify--field",b).each(function(){var b=a(this),e=!0,f=b.attr("data-required")||!1;!_.isUndefined(f)&&f&&(f=JSON.parse(f),e=d.multiple_compare(f,c),e?b.removeClass("customify--hide"):b.addClass("customify--hide"))})},addDeviceSwitchers:function(b){var c=this;_.isUndefined(b)&&(b=c.container);var d=a("#customize-footer-actions .devices").clone();d.addClass("customify-devices"),a("button",d).each(function(){var b=a(this).attr("data-device");_.indexOf(c.devices,b)<0&&a(this).remove()}),a(".customify-field-heading",b).append(d).addClass("customify-devices-added")},addRepeaterItem:function(b,d,e,f){_.isObject(d)||(d={});var g=this,h=g.getTemplate(),i=b.fields,j=!0,k=b.title_only;!1===b.addable&&(j=!1);var l=a(h(b,"tmpl-customize-control-"+g.type+"-repeater"));return e.find(".customify--settings-fields").append(l),_.each(i,function(c,e){c.value="",c.addable=j,_.isUndefined(d[c.name])||(c.value=d[c.name]);var h;h=a('<div class="customify--repeater-field"></div>'),a(".customify--repeater-item-inner",l).append(h),g.add(c,h,function(){_.isFunction(f)&&f()});var i=c.value;b.live_title_field===c.name&&("select"===c.type?i=c.choices[c.value]:(_.isUndefined(i)||""==i)&&(i=Customify_Control_Args.untitled),g.updateRepeaterLiveTitle(i,l,c))}),_.isUndefined(d._visibility)||"hidden"!==d._visibility?l.find("input.r-visible-input").attr("checked","checked"):(l.addClass("item---visible-hidden"),l.find("input.r-visible-input").removeAttr("checked")),k&&a(".customify--repeater-item-settings, .customify--repeater-item-toggle",l).hide(),c.trigger("customify/customizer/repeater/add",[l,g]),l},limitRepeaterItems:function(a,b){return},initRepeater:function(b,d,e){var f=this;b=_.defaults(b,{addable:null,title_only:null,limit:null,live_title_field:null,fields:null}),b.limit=parseInt(b.limit),isNaN(b.limit)&&(b.limit=0),d.find(".customify--settings-fields").sortable({handle:".customify--repeater-item-heading",containment:"parent",update:function(a,b){_.isFunction(e)&&e()}}),d.on("click",".customify--repeater-reorder",function(b){b.preventDefault(),a(".customify--repeater-items",d).toggleClass("reorder-active"),a(".customify--repeater-add-new",d).toggleClass("disabled"),a(".customify--repeater-items",d).hasClass("reorder-active")?a(this).html(a(this).data("done")):a(this).html(a(this).data("text"))}),d.on("click",".customify--repeater-item .customify--up",function(b){b.preventDefault();var c=a(this).closest(".customify--repeater-item");if(c.index()>0){var d=c.prev();c.insertBefore(d),_.isFunction(e)&&e()}}),d.on("click",".customify--repeater-item .customify--down",function(b){b.preventDefault();var c=a(".customify--repeater-items .customify--repeater-item",d).length,f=a(this).closest(".customify--repeater-item");if(f.index()<c-1){var g=f.next();f.insertAfter(g),_.isFunction(e)&&e()}}),_.isArray(b.value)&&_.each(b.value,function(a){f.addRepeaterItem(b,a,d,e)}),f.limitRepeaterItems(),d.on("change",".customify--repeater-item .r-visible-input",function(b){b.preventDefault();var c=a(this).closest(".customify--repeater-item");a(this).is(":checked")?c.removeClass("item---visible-hidden"):c.addClass("item---visible-hidden")}),b.title_only||d.on("click",".customify--repeater-item-toggle, .customify--repeater-live-title",function(b){b.preventDefault(),a(this).closest(".customify--repeater-item").toggleClass("customify--open")}),d.on("click",".customify--remove",function(b){b.preventDefault(),a(this).closest(".customify--repeater-item").remove(),c.trigger("customify/customizer/repeater/remove",[f]),_.isFunction(e)&&e(),f.limitRepeaterItems()});var g={};_.each(b.fields,function(a,b){g[a.name]=null,_.isUndefined(a.default)||(g[a.name]=a.default)}),d.on("click",".customify--repeater-add-new",function(c){c.preventDefault(),a(this).hasClass("disabled")||(f.addRepeaterItem(b,g,d,e),_.isFunction(e)&&e(),f.limitRepeaterItems())})},add:function(b,c,d){var e=this,f=e.getTemplate(),g="tmpl-field-"+e.type+"-"+b.type;if(0==a("#"+g).length&&(g="tmpl-field-"+e.type+"-text"),b.device_settings){var h=null;_.each(e.devices,function(d,e){var i=_.clone(b);i.original_name=b.name,_.isObject(b.value)?_.isUndefined(b.value[d])?i.value="":i.value=b.value[d]:(i.value="",0===e&&(i.value=b.value)),i.name=b.name+"-"+d,i._current_device=d;var j=a(f(i,g,"field")),k=j.find(".customify-field-settings-inner").first();h||c.append(j).addClass("customify--multiple-devices"),k.addClass("customify--for-"+d),k.attr("data-for-device",d),h&&(k.insertAfter(h),h=k),h=k})}else{b.original_name=b.name;var i=f(b,g,"field");c.html(i)}if("repeater"===b.type){var j=a(f(b,"tmpl-customize-control-repeater-inner"));c.find(".customify-field-settings-inner").replaceWith(j),e.initRepeater(b,j,d)}switch(b.css_format&&_.isString(b.css_format)&&b.css_format.indexOf("value_no_unit")>0&&(c.find(".customify--slider-input").addClass("no-unit"),a(".customify--css-unit .customify--label-active",c).hide()),b.type){case"color":case"shadow":e.initColor(c);break;case"image":case"video":case"audio":case"attchment":case"file":e.initMedia(c);break;case"slider":e.initSlider(c);break;case"css_ruler":e.initCSSRuler(c,d)}"hidden"!==b.type&&!_.isUndefined(b.device_settings)&&b.device_settings&&e.addDeviceSwitchers(c)},addFields:function(b,c,d,e){var f=this;_.isObject(c)||(c={}),_.each(b,function(b,g){_.isUndefined(b.class)&&(b.class="");var h=a('<div class="customify--group-field ft--'+b.type+" "+b.class+'" data-field-name="'+b.name+'"></div>');d.append(h),b.original_name=b.name,_.isUndefined(c[b.name])?_.isUndefined(b.default)?b.value=null:b.value=b.default:b.value=c[b.name],f.add(b,h,e)})},initSlider:function(b){a(".customify-input-slider",b).length>0&&a(".customify-input-slider",b).each(function(){var b=a(this),c=b.parent(),d=a(".customify--slider-input",c),e=b.data("min")||0,f=b.data("max")||300,g=b.data("step")||1;_.isNumber(e)||(e=0),_.isNumber(f)||(f=300),_.isNumber(g)||(g=1);var h=d.val();b.slider({range:"min",value:h,step:g,min:e,max:f,slide:function(a,b){d.val(b.value).trigger("data-change")}}),d.on("change",function(){b.slider("value",a(this).val())});var i=b.closest(".customify-input-slider-wrapper");i.on("click",".reset",function(c){c.preventDefault();var d=b.data("default");_.isObject(d)||(d={unit:"px",value:""}),a(".customify--slider-input",i).val(d.value),b.slider("option","value",d.value),a('.customify--css-unit input.customify-input[value="'+d.unit+'"]',i).trigger("click"),a(".customify--slider-input",i).trigger("change")})})},initMedia:function(b){b.on("click",".customify--media .customify--add, .customify--media .customify--change, .customify--media .customify-image-preview",function(b){b.preventDefault();var c=a(this).closest(".customify--media");d.setPreview(c),d.controlMediaImage.open()}),b.on("click",".customify--media .customify--remove",function(b){b.preventDefault();var c=a(this).closest(".customify--media");d.remove(c)})},initCSSRuler:function(b,c){b.on("change",".customify--label-parent",function(){if("radio"==a(this).attr("type")){var d=a(this).attr("name");a('input[name="'+d+'"]',b).parent().removeClass("customify--label-active")}a(this).is(":checked")?a(this).parent().addClass("customify--label-active"):a(this).parent().removeClass("customify--label-active"),_.isFunction(c)&&c()}),b.on("change keyup",".customify--css-ruler .customify-input-css",function(){var b=a(this).closest(".customify--css-ruler");if(a(".customify--css-ruler-link input",b).is(":checked")){var d=a(this).val();a(".customify-input-css",b).not(a(this)).each(function(){a(this).is(":disabled")||a(this).val(d)})}_.isFunction(c)&&c()})},initColor:function(b){a(".customify-input-color",b).each(function(){var b=a(this),c=b.data("default")||"",d=a(".customify-input--color",b).val();a(".customify--color-panel",b).attr("data-alpha","true"),a(".customify--color-panel",b).wpColorPicker({defaultColor:c,change:function(c,e){var f=e.color.toString();a(".customify-input--color",b).val(f),e.color.toString()!==d&&(d=f,a(".customify-input--color",b).trigger("change"))},clear:function(c,d){a(".customify-input--color",b).val(""),a(".customify-input--color",b).trigger("data-change")}})})}},g={devices:["desktop","tablet","mobile"],type:"customify",settingField:null,getTemplate:_.memoize(function(){var b,c=this,d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e,f,g){return _.isUndefined(f)&&(f="tmpl-customize-control-"+c.type),!_.isUndefined(g)&&_.isString(g)?d.variable=g:d.variable="data",(b=_.template(a("#"+f).html(),null,d))(e)}}),addDeviceSwitchers:f.addDeviceSwitchers,init:function(){var a=this;switch(_.isArray(a.params.devices)&&!_.isEmpty(a.params.devices)&&(a.devices=a.params.devices),a.settingField=a.container.find("[data-customize-setting-link]").first(),a.params.setting_type){case"group":a.initGroup();break;case"repeater":a.initRepeater();break;default:a.initField()}a.container.on("change keyup data-change","input:not(.change-by-js), select:not(.change-by-js), textarea:not(.change-by-js)",function(){a.getValue()})},addParamsURL:function(b,c){return a.isEmptyObject(c)||(b+=(b.indexOf("?")>=0?"&":"?")+a.param(c)),b},compare:f.compare,multiple_compare:f.multiple_compare,initConditional:f.initConditional,getValue:function(b){var d=this,e="",g={type:d.params.setting_type,name:d.id,value:d.params.value,default:d.params.default,devices:d.params.devices};return"slider"===g.type&&(g.min=d.params.min,g.max=d.params.max,g.step=d.params.step,g.unit=d.params.unit),"css_ruler"===g.type&&(g.fields_disabled=d.params.fields_disabled),"group"!==g.type&&"repeater"!==g.type||(g.fields=d.params.fields,g.live_title_field=d.params.live_title_field),"select"!==d.params.setting_type&&"radio"!==d.params.setting_type||(g.choices=d.params.choices),"checkbox"===d.params.setting_type&&(g.checkbox_label=d.params.checkbox_label),g.device_settings=d.params.device_settings,e=f.getValue(g,a(".customify--settings-fields",d.container)),(_.isUndefined(b)||b)&&(d.setting.set(d.encodeValue(e)),c.trigger("customify/customizer/change"),console.log("Save_Value: ",e)),e},encodeValue:function(a){return encodeURI(JSON.stringify(a))},decodeValue:function(a){return JSON.parse(decodeURI(a))},updateRepeaterLiveTitle:function(b,c,d){a(".customify--repeater-live-title",c).text(b)},initGroup:function(){var b=this;b.params.device_settings?(b.container.find(".customify--settings-fields").addClass("customify--multiple-devices"),_.isObject(b.params.value)||(b.params.value={}),_.each(b.devices,function(c,d){var e=a('<div class="customify-group-device-fields customify-field-settings-inner customify--for-'+c+'"></div>');b.container.find(".customify--settings-fields").append(e);var g={};_.isUndefined(b.params.value[c])||(g=b.params.value[c]),_.isObject(g)||(g={}),f.addFields(b.params.fields,g,e,function(){b.getValue()})})):f.addFields(b.params.fields,b.params.value,b.container.find(".customify--settings-fields"),function(){b.getValue()}),b.getValue(!1)},addField:function(a,b,c){f.devices=_.clone(this.devices),f.add(a,b,c)},initField:function(){var a=this,b={type:a.params.setting_type,name:a.id,value:a.params.value,default:a.params.default,devices:a.params.devices,unit:a.params.unit};"slider"==b.type&&(b.min=a.params.min,b.max=a.params.max,b.step=a.params.step),"css_ruler"==b.type&&(b.fields_disabled=a.params.fields_disabled),"select"!=a.params.setting_type&&"radio"!=a.params.setting_type||(b.choices=a.params.choices),"checkbox"==a.params.setting_type&&(b.checkbox_label=a.params.checkbox_label),b.device_settings=a.params.device_settings;var c=a.container.find(".customify--settings-fields");a.addField(b,c,function(){a.getValue()}),"hidden"!==b.type&&!_.isUndefined(b.device_settings)&&b.device_settings&&a.addDeviceSwitchers(a.container)},addRepeaterItem:function(b){_.isObject(b)||(b={});var d=this,e=d.getTemplate(),f=d.params.fields,g=!0,h=d.params.title_only;!1===d.params.addable&&(g=!1);var i=a(e(d.params,"tmpl-customize-control-"+d.type+"-repeater"));return d.container.find(".customify--settings-fields").append(i),_.each(f,function(c,e){c.value="",c.addable=g,_.isUndefined(b[c.name])||(c.value=b[c.name]);var f;f=a('<div class="customify--repeater-field"></div>'),a(".customify--repeater-item-inner",i).append(f),d.addField(c,f,function(){d.getValue()})}),_.isUndefined(b._visibility)||"hidden"!==b._visibility?i.find("input.r-visible-input").attr("checked","checked"):(i.addClass("item---visible-hidden"),i.find("input.r-visible-input").removeAttr("checked")),h&&a(".customify--repeater-item-settings, .customify--repeater-item-toggle",i).hide(),c.trigger("customify/customizer/repeater/add",[i,d]),i},limitRepeaterItems:function(){var b=this,c=a(".customify--repeater-add-new",b.container),d=a(".customify--settings-fields .customify--repeater-item",b.container).length;b.params.limit>0&&(d>=b.params.limit?(c.addClass("customify--hide"),b.params.limit_msg&&(0===a(".customify--limit-item-msg",b.container).length?a('<p class="customify--limit-item-msg">'+b.params.limit_msg+"</p>").insertBefore(c):a(".customify--limit-item-msg",b.container).removeClass("customify--hide"))):(a(".customify--limit-item-msg",b.container).addClass("customify--hide"),c.removeClass("customify--hide"))),d>0?a(".customify--repeater-reorder",b.container).removeClass("customify--hide"):a(".customify--repeater-reorder",b.container).addClass("customify--hide")},initRepeater:function(){var b=this;b.params.limit=parseInt(b.params.limit),isNaN(b.params.limit)&&(b.params.limit=0),b.container.find(".customify--settings-fields").sortable({handle:".customify--repeater-item-heading",containment:"parent",update:function(a,c){b.getValue()}}),b.container.on("click",".customify--repeater-reorder",function(c){c.preventDefault(),a(".customify--repeater-items",b.container).toggleClass("reorder-active"),a(".customify--repeater-add-new",b.container).toggleClass("disabled"),a(".customify--repeater-items",b.container).hasClass("reorder-active")?a(this).html(a(this).data("done")):a(this).html(a(this).data("text"))}),b.container.on("click",".customify--repeater-item .customify--up",function(c){c.preventDefault();var d=a(this).closest(".customify--repeater-item");if(d.index()>0){var e=d.prev();d.insertBefore(e),b.getValue()}}),b.container.on("click",".customify--repeater-item .customify--down",function(c){c.preventDefault();var d=a(".customify--repeater-items .customify--repeater-item",b.container).length,e=a(this).closest(".customify--repeater-item");if(e.index()<d-1){var f=e.next();e.insertAfter(f),b.getValue()}}),_.isArray(b.params.value)&&(_.each(b.params.value,function(a){b.addRepeaterItem(a)}),b.getValue(!1)),b.limitRepeaterItems(),b.container.on("change",".customify--repeater-item .r-visible-input",function(b){b.preventDefault();var c=a(this).closest(".customify--repeater-item");a(this).is(":checked")?c.removeClass("item---visible-hidden"):c.addClass("item---visible-hidden")}),b.params.title_only||b.container.on("click",".customify--repeater-item-toggle, .customify--repeater-live-title",function(b){b.preventDefault(),a(this).closest(".customify--repeater-item").toggleClass("customify--open")}),b.container.on("click",".customify--remove",function(d){d.preventDefault(),a(this).closest(".customify--repeater-item").remove(),c.trigger("customify/customizer/repeater/remove",[b]),b.getValue(),b.limitRepeaterItems()});var d={};_.each(b.params.fields,function(a,b){d[a.name]=null,_.isUndefined(a.default)||(d[a.name]=a.default)}),b.container.on("click",".customify--repeater-add-new",function(c){c.preventDefault(),a(this).hasClass("disabled")||(b.addRepeaterItem(d),b.getValue(),b.limitRepeaterItems())})}},h=function(a){a=_.extend(a,g),a.init()};wp.customize.controlConstructor.customify=wp.customize.Control.extend({ready:function(){e[this.id]=this}});var i={pickingEl:null,listIcons:null,render:function(b){var c=this;_.isUndefined(b)||_.isEmpty(b)||_.each(b,function(b,d){a("#customify--sidebar-icon-type").append(' <option value="'+d+'">'+b.name+"</option>"),c.addCSS(b,d),c.addIcons(b,d)})},addCSS:function(b,c){a("head").append("<link rel='stylesheet' id='font-icon-"+c+"'  href='"+b.url+"' type='text/css' media='all' />")},addIcons:function(b,c){var d='<ul class="customify--list-icons icon-'+c+'" data-type="'+c+'">';_.each(b.icons,function(a,e){var f="";f=b.class_config?b.class_config.replace(/__icon_name__/g,a):a,d+='<li title="'+a+'" data-type="'+c+'" data-icon="'+f+'"><span class="icon-wrapper"><i class="'+f+'"></i></span></li>'}),d+="</ul>",a("#customify--icon-browser").append(d)},changeType:function(){c.on("change","#customify--sidebar-icon-type",function(){var b=a(this).val();b&&"all"!=b?(a("#customify--icon-browser .customify--list-icons").hide(),a("#customify--icon-browser .customify--list-icons.icon-"+b).show()):a("#customify--icon-browser .customify--list-icons").show()})},show:function(){var b=a("#customize-controls").width();a("#customify--sidebar-icons").css("left",b).addClass("customify--active")},close:function(){a("#customify--sidebar-icons").css("left",-300).removeClass("customify--active"),a(".customify--icon-picker").removeClass("customify--icon-picking"),this.pickingEl=null},autoClose:function(){var b=this;c.on("click",function(c){a(c.target).closest(".customify--icon-picker").length||a(c.target).closest("#customify--sidebar-icons").length||b.close()}),a("#customify--sidebar-icons .customize-controls-icon-close").on("click",function(){b.close()}),c.on("keyup",function(a){27===a.keyCode&&b.close()})},picker:function(){var b=this,d=function(a){b.pickingEl&&b.pickingEl.removeClass("customify--icon-picking"),b.pickingEl=a.closest(".customify--icon-picker"),b.pickingEl.addClass("customify--picking-icon"),b.show()};c.on("click",".customify--icon-picker .customify--pick-icon",function(c){c.preventDefault();var e=a(this);_.isNull(b.listIcons)?b.ajaxLoad(function(){d(e)}):d(e)}),c.on("click","#customify--icon-browser li",function(c){c.preventDefault();var d=a(this),e=d.find("i").clone(),f=d.attr("data-icon")||"",g=d.attr("data-type")||"";console.log("icon",f),a(".customify--input-icon-type",b.pickingEl).val(g),a(".customify--input-icon-name",b.pickingEl).val(f).trigger("change"),a(".customify--icon-preview-icon",b.pickingEl).html(e),b.close()}),c.on("click",".customify--icon-picker .customify--icon-remove",function(c){c.preventDefault(),b.pickingEl&&b.pickingEl.removeClass("customify--icon-picking"),b.pickingEl=a(this).closest(".customify--icon-picker"),b.pickingEl.addClass("customify--picking-icon"),a(".customify--input-icon-type",b.pickingEl).val(""),a(".customify--input-icon-name",b.pickingEl).val("").trigger("change"),a(".customify--icon-preview-icon",b.pickingEl).html("")})},ajaxLoad:function(b){var c=this;a.get(Customify_Control_Args.ajax,{action:"customify/customizer/ajax/get_icons"},function(a){a.success&&(c.listIcons=a.data,c.render(a.data),c.changeType(),c.autoClose(),_.isFunction(b)&&b())})},init:function(){var b=this;b.ajaxLoad(),b.picker(),c.on("keyup","#customify--icon-search",function(b){var c=a(this).val();c=c.trim(),c?(a("#customify--icon-browser li").hide(),a("#customify--icon-browser li[data-icon*='"+c+"']").show()):a("#customify--icon-browser li").show()})}},j={fonts:null,optionHtml:"",$el:null,values:{},container:null,fields:Customify_Control_Args.typo_fields,load:function(){var b=this;a.get(Customify_Control_Args.ajax,{action:"customify/customizer/ajax/fonts"},function(a){a.success&&(b.fonts=a.data)})},toSelectOptions:function(a,b,c){var d="";if(_.isUndefined(b)&&(b=""),"google"===c)_.each(a,function(a){var c="";a===b&&(c=' selected="selected" '),d+="<option"+c+' value="'+a+'">'+a+"</option>"});else{_.each(Customify_Control_Args.list_font_weight,function(a,c){var e="";a===b&&(e=' selected="selected" '),d+="<option"+e+' value="'+c+'">'+a+"</option>"});var e,f,g;for(g=1;g<=9;g++)e=100*g,f="",e===b&&(f=' selected="selected" '),d+="<option"+f+' value="'+e+'">'+e+"</option>"}return d},toCheckboxes:function(a,b){var c='<div class="list-subsets">';return _.isObject(b)||(b={}),_.each(a,function(a){var d="";_.isUndefined(b[a])||(d=' checked="checked" '),c+="<p><label><input "+d+'type="checkbox" class="customify-typo-input change-by-js" data-name="languages" name="_n-'+(new Date).getTime()+'" value="'+a+'"> '+a+"</label></p>"}),c+="</div>"},ready:function(){var b=this;f.devices=_.clone(f.allDevices),_.isObject(b.values)||(b.values={}),a(".customify-modal-settings--fields",b.container).append('<input type="hidden" class="customify--font-type">'),f.addFields(j.fields,b.values,a(".customify-modal-settings--fields",b.container),function(){b.get()}),a("input, select, textarea",a(".customify-modal-settings--fields")).removeClass("customify-input").addClass("customify-typo-input change-by-js"),_.each(b.fonts,function(a,c){b.optionHtml+='<option value="">'+Customify_Control_Args.theme_default+"</option>",b.optionHtml+='<optgroup label="'+a.title+'">',_.each(a.fonts,function(a,c){b.optionHtml+='<option value="'+c+'">'+c+"</option>"}),b.optionHtml+="</optgroup>"}),a('.customify-typo-input[data-name="font"]',b.container).html(b.optionHtml),!_.isUndefined(b.values.font)&&_.isString(b.values.font)&&a('.customify-typo-input[data-name="font"] option[value="'+b.values.font+'"]',b.container).attr("selected","selected"),b.container.on("change init-change",'.customify-typo-input[data-name="font"]',function(){var c=a(this).val();b.setUpFont(c)}),a('.customify-typo-input[data-name="font"]',b.container).trigger("init-change"),b.container.on("change data-change","input, select",function(){b.get()})},setUpFont:function(b){var c,d,e,f,g=this;_.isEmpty(b)&&(f="normal"),_.isString(b)?(f=_.isUndefined(g.fonts.google.fonts[b])?"normal":"google",c=g.fonts.google.fonts[b]):c=g.fonts.google.fonts[b.font],_.isUndefined(c)||_.isEmpty(c)||(d=c.variants,e=c.subsets),a('.customify-typo-input[data-name="font_weight"]',g.container).html(g.toSelectOptions(d,_.isObject(g.values)?g.values.font_weight:"",f)),a(".customify--font-type",g.container).val(f),"normal"==f?a('.customify--group-field[data-field-name="languages"]',g.container).addClass("customify--hide").find(".customify-field-settings-inner").html(""):(a('.customify--group-field[data-field-name="languages"]',g.container).removeClass("customify--hide"),a('.customify--group-field[data-field-name="languages"]',g.container).removeClass("customify--hide").find(".customify-field-settings-inner").html(g.toCheckboxes(e,_.isObject(g.values)?g.values.languages:"")))},open:function(b){this.$el=b;var c=this;if("opening"!==(b.attr("data-opening")||!1)){if(b.attr("data-opening","opening"),c.values=a(".customify-typography-input",c.$el).val(),c.values=JSON.parse(c.values),b.addClass("customify-modal--inside"),a(".customify-modal-settings",b).length)c.container=a(".customify-modal-settings",b),c.container.hide();else{var d=a(a("#tmpl-customify-modal-settings").html());c.container=d,c.container.hide(),this.$el.append(d),c.ready()}c.container.slideDown(300,function(){c.$el.addClass("modal--opening"),a(".action--reset",c.$el).show()})}else a(".customify-modal-settings",b).slideUp(300,function(){b.attr("data-opening",""),b.removeClass("modal--opening"),a(".action--reset",b).hide()})},reset:function(b){this.$el=b;var c=this;a(".customify-modal-settings",b).remove(),c.values=a(".customify-typography-input",c.$el).attr("data-default")||"{}";try{c.values=JSON.parse(c.values)}catch(a){}if(b.addClass("customify-modal--inside"),a(".customify-modal-settings",b).length)c.container=a(".customify-modal-settings",b);else{var d=a(a("#tmpl-customify-modal-settings").html());c.container=d,this.$el.append(d),c.ready()}c.get()},get:function(){var b={},c=this;return _.each(this.fields,function(d){"languages"===d.name&&(d.type="checkboxes"),b[d.name]=f.getValue(d,a('.customify--group-field[data-field-name="'+d.name+'"]',c.container))}),b.font_type=a(".customify--font-type",c.container).val(),a(".customify-typography-input",this.$el).val(JSON.stringify(b)).trigger("change"),b},init:function(){this.load();var b=this;c.on("click",".customize-control-customify-typography .action--edit",function(){b.open(a(this).closest(".customize-control-customify-typography").eq(0))})}},k={tabs:{normal:"Normal",hover:"Hover"},config:{},$el:null,container:null,controlID:"",addFields:function(b){var c=this;_.isObject(c.values)||(c.values={}),c.values=_.defaults(c.values,{});var d=a(".customify-modal-settings--fields",c.container);d.html(""),c.config=_.defaults(c.config,{tabs:{}});var e=a('<div class="modal--tabs"></div>'),g=0;_.each(c.config.tabs,function(a,b){a&&_.isObject(c.config[b+"_fields"])&&(g++,e.append('<div><span data-tab="'+b+'" class="modal--tab modal-tab--'+b+'">'+a+"</span></div>"))}),d.append(e),g<=1&&e.addClass("customify--hide"),f.devices=Customify_Control_Args.devices,_.each(c.config.tabs,function(b,e){if(_.isObject(c.config[e+"_fields"])&&!_.isEmpty(e+"_fields")){var g=a('<div class="modal-tab-content modal-tab--'+e+'"></div>');d.append(g),f.addFields(c.config[e+"_fields"],c.values[e],g,function(){c.get(_.clone(c.config))});var h;_.isUndefined(c.values[e])||_.isEmpty(c.values[e])?(h={},_.each(c.config[e+"_fields"],function(a){h[a.name]=_.isUndefined(a.default)?null:a.default})):h=c.values[e],f.initConditional(g,h)}}),a("input, select, textarea",c.container).removeClass("customify-input").addClass("customify-modal-input change-by-js"),d.on("change data-change","input, select, textarea",function(){c.get(_.clone(c.config))}),c.container.on("click",".modal--tab",function(){var b=a(this).attr("data-tab")||"";a(".modal--tabs .modal--tab",c.container).removeClass("tab--active"),a(this).addClass("tab--active"),a(".modal-tab-content",c.container).removeClass("tab--active"),a(".modal-tab-content.modal-tab--"+b,c.container).addClass("tab--active")}),a(".modal--tabs .modal--tab",c.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var b=this;b.container.slideUp(300,function(){b.$el.removeClass("modal--opening"),b.$el.attr("data-opening",""),a(".action--reset",b.$el).hide()})},reset:function(){var b=this;a(".customify-modal-settings",b.$el).remove();try{b.values=JSON.parse(a(".customify-hidden-modal-input",b.$el).attr("data-default")||"{}")}catch(a){b.values={}}if(a(".customify-modal-settings",b.$el).length)b.container=a(".customify-modal-settings",b.$el);else{var c=a(a("#tmpl-customify-modal-settings").html());b.container=c,this.$el.append(c),b.addFields()}b.$el.addClass("customify-modal--inside"),b.$el.addClass("modal--opening"),b.container.show(0),a(".customify-hidden-modal-input",b.$el).val("{}").trigger("change")},get:function(b){var c={},d=this;return d.config=b,_.each(d.config.tabs,function(b,e){var g={},h=a(".modal-tab-content.modal-tab--"+e,d.container);_.isObject(d.config[e+"_fields"])&&_.each(d.config[e+"_fields"],function(b){g[b.name]=f.getValue(b,a('.customify--group-field[data-field-name="'+b.name+'"]',h))}),c[e]=g,f.initConditional(h,g)}),a(".customify-hidden-modal-input",this.$el).val(JSON.stringify(c)).trigger("change"),c},open:function(){var b=this;if("opening"!==(b.$el.attr("data-opening")||!1)){b.$el.attr("data-opening","opening"),b.values=a(".customify-hidden-modal-input",b.$el).val();try{b.values=JSON.parse(b.values)}catch(a){}if(b.$el.addClass("customify-modal--inside"),a(".customify-modal-settings",b.$el).length)b.container=a(".customify-modal-settings",b.$el);else{var c=a(a("#tmpl-customify-modal-settings").html());c.hide(),b.container=c,b.$el.append(c),b.addFields()}this.container.slideDown(300),this.$el.addClass("modal--opening"),a(".action--reset",this.$el).show()}else this.container.slideUp(300,function(){b.$el.attr("data-opening",""),a(".customify-modal-settings",b.$el).hide(),b.$el.removeClass("modal--opening"),a(".action--reset",b.$el).hide()})}},l={},m=function(){c.on("click",".customize-control-customify-modal .action--edit, .customize-control-customify-modal .action--reset, .customize-control-customify-modal .customify-control-field-header",function(c){c.preventDefault();var d=a(this).attr("data-control")||"";if(_.isUndefined(l[d])){var e=b.control(d);if(d&&!_.isUndefined(e)){var f=_.clone(k);f.config=e.params.fields,f.$el=a(this).closest(".customize-control-customify-modal").eq(0),l[d]=f}}_.isUndefined(l[d])||(a(this).hasClass("action--reset")?l[d].reset():l[d].open())})},n={tabs:{normal:"Normal",hover:"Hover"},fields:{},normal_fields:{},hover_fields:{},controlID:"",$el:"",contailner:"",setupFields:function(a,b){var c,d,e=[];return-1===a?e=b:!1===a?e=null:_.isObject(a)&&(c={},d=0,_.each(b,function(b){(_.isUndefined(a[b.name])||a[b.name])&&(c[d]=b,d++)}),e=c),e},setupConfig:function(a,b,c){var d=this;d.tabs={},d.normal_fields={},d.hover_fields={},d.tabs=_.clone(Customify_Control_Args.styling_config.tabs),!1===a?d.tabs.hover=!1:_.isObject(a)&&(d.tabs=a),d.normal_fields=d.setupFields(b,Customify_Control_Args.styling_config.normal_fields),d.hover_fields=d.setupFields(c,Customify_Control_Args.styling_config.hover_fields)},addFields:function(b){var c=this;_.isObject(c.values)||(c.values={}),c.values=_.defaults(c.values,{hover:{},normal:{}});var d=a(".customify-modal-settings--fields",c.container);d.html("");var e=a('<div class="modal--tabs"></div>'),g=0;_.each(c.tabs,function(a,b){a&&!_.isEmpty(c[b+"_fields"])&&(g++,e.append('<div><span data-tab="'+b+'" class="modal--tab modal-tab--'+b+'">'+a+"</span></div>"))}),d.append(e),g<=1&&e.addClass("customify--hide"),f.devices=Customify_Control_Args.devices,_.each(c.tabs,function(b,e){if(_.isObject(c[e+"_fields"])&&!_.isEmpty(e+"_fields")){var g=a('<div class="modal-tab-content modal-tab--'+e+'"></div>');d.append(g),f.addFields(c[e+"_fields"],c.values[e],g,function(){c.get()}),f.initConditional(g,c.values[e])}}),a("input, select, textarea",c.container).removeClass("customify-input").addClass("customify-modal-input change-by-js"),d.on("change data-change","input, select, textarea",function(){c.get()}),c.container.on("click",".modal--tab",function(){var b=a(this).attr("data-tab")||"";a(".modal--tabs .modal--tab",c.container).removeClass("tab--active"),a(this).addClass("tab--active"),a(".modal-tab-content",c.container).removeClass("tab--active"),a(".modal-tab-content.modal-tab--"+b,c.container).addClass("tab--active")}),a(".modal--tabs .modal--tab",c.container).eq(0).trigger("click"),this.container.slideUp(0)},close:function(){var b=this;b.container.slideUp(300,function(){b.$el.removeClass("modal--opening"),b.$el.attr("data-opening",""),a(".action--reset",b.$el).hide()})},reset:function(){var b=this;a(".customify-modal-settings",b.$el).remove();try{b.values=JSON.parse(a(".customify-hidden-modal-input",b.$el).attr("data-default")||"{}")}catch(a){b.values={}}if(a(".customify-modal-settings",b.$el).length)b.container=a(".customify-modal-settings",b.$el);else{var c=a(a("#tmpl-customify-modal-settings").html());b.container=c,b.$el.append(c),b.addFields()}b.$el.addClass("customify-modal--inside"),b.$el.addClass("modal--opening"),b.container.show(0),a(".customify-hidden-modal-input",b.$el).val("{}").trigger("change")},get:function(){var b={},c=this;return _.each(c.tabs,function(d,e){var g={},h=a(".modal-tab-content.modal-tab--"+e,c.container);_.isObject(c[e+"_fields"])&&_.each(c[e+"_fields"],function(b){g[b.name]=f.getValue(b,a('.customify--group-field[data-field-name="'+b.name+'"]',h))}),b[e]=g,f.initConditional(h,g)}),a(".customify-hidden-modal-input",this.$el).val(JSON.stringify(b)).trigger("change"),b},open:function(){var b=this;if("opening"!==(b.$el.attr("data-opening")||!1)){b.$el.attr("data-opening","opening"),b.values=a(".customify-hidden-modal-input",b.$el).val();try{b.values=JSON.parse(b.values)}catch(a){}if(b.$el.addClass("customify-modal--inside"),a(".customify-modal-settings",b.$el).length)b.container=a(".customify-modal-settings",b.$el);else{var c=a(a("#tmpl-customify-modal-settings").html());c.hide(),b.container=c,b.$el.append(c),b.addFields()}this.container.slideDown(300),b.$el.addClass("modal--opening"),a(".action--reset",b.$el).show()}else b.container.slideUp(300,function(){b.$el.attr("data-opening",""),a(".customify-modal-settings",b.$el).hide(),b.$el.removeClass("modal--opening"),a(".action--reset",b.$el).hide()})}},o={},p=function(){c.on("click",".customize-control-customify-styling .action--edit, .customize-control-customify-styling .action--reset",function(c){c.preventDefault();var d=a(this).attr("data-control")||"";if(_.isUndefined(o[d])){var e=b.control(d),f=_.clone(n),g=null,h=-1,i=-1;d&&!_.isUndefined(e)&&!_.isUndefined(e.params.fields)&&_.isObject(e.params.fields)&&(_.isUndefined(e.params.fields.tabs)||(g=e.params.fields.tabs),_.isUndefined(e.params.fields.normal_fields)||(h=e.params.fields.normal_fields),_.isUndefined(e.params.fields.hover_fields)||(i=e.params.fields.hover_fields)),f.$el=a(this).closest(".customize-control-customify-styling").eq(0),f.setupConfig(g,h,i),o[d]=f}_.isUndefined(o[d])||(a(this).hasClass("action--reset")?o[d].reset():o[d].open())})};b.bind("ready",function(d,f){c.on("customify/customizer/device/change",function(b,c){a(".customify--device-select a").removeClass("customify--active"),"mobile"!=c?(a(".customify--device-mobile").addClass("customify--hide"),a(".customify--device-general").removeClass("customify--hide"),a(".customify--tab-device-general").addClass("customify--active")):(a(".customify--device-general").addClass("customify--hide"),a(".customify--device-mobile").removeClass("customify--hide"),a(".customify--tab-device-mobile").addClass("customify--active"))}),c.on("click",".customify--tab-device-mobile",function(a){a.preventDefault(),c.trigger("customify/customizer/device/change",["mobile"])}),c.on("click",".customify--tab-device-general",function(a){a.preventDefault(),c.trigger("customify/customizer/device/change",["general"])}),a(".accordion-section").each(function(){var b=a(this),c=a(".customify--device-select",b).first();a(".customize-section-title",b).append(c)}),c.on("click",".customify-devices button",function(b){b.preventDefault();var c=a(this).attr("data-device")||"";a('#customize-footer-actions .devices button[data-device="'+c+'"]').trigger("click")}),c.on("change",".customify--field input:checkbox",function(b){a(this).is(":checked")?a(this).parent().addClass("customify--checked"):a(this).parent().removeClass("customify--checked")});var g=function(a){_.isUndefined(a)&&(a=!1);var c=b.get();_.each(c,function(d,e){var f=b.control(e);if(!_.isUndefined(f)&&"customify"==f.params.type&&!_.isEmpty(f.params.required)){var g=!1;g=f.multiple_compare(f.params.required,c,a),g?f.container.removeClass("customify--hide"):f.container.addClass("customify--hide")}})};c.ready(function(){_.each(e,function(a,b){new h(a)}),g(!1),c.on("customify/customizer/change",function(){g(!0)}),i.init(),j.init(),p(),m()}),c.on("click",".customize-control-customify-typography .action--reset",function(){j.reset(a(this).closest(".customize-control-customify-typography").eq(0))}),b.section.each(function(a){"section"!=a.params.type&&"customify_section"!=a.params.type||a.container.find(".customize-section-description-container .customize-section-title").append('<button data-section="'+a.id+'" type="button" title="'+Customify_Control_Args.reset+'" class="customize--reset-section" aria-expanded="false"><span class="screen-reader-text">'+Customify_Control_Args.reset+"</span></button>")}),c.on("click",".customize--reset-section",function(c){if(c.preventDefault(),!a(this).hasClass("loading")&&confirm(Customify_Control_Args.confirm_reset)){a(this).addClass("loading");var d=a(this).attr("data-section")||"",e=_.clone(window.location);if(d){var f=[],g=wp.customize.section(d).controls();_.each(g,function(a,c){b(a.id).set(""),f[c]=a.id}),a.post(ajaxurl,{action:"customify__reset_section",section:d,settings:f},function(){a(window).off("beforeunload.customize-confirm"),top.location.href=e.origin+e.pathname+"?autofocus[section]="+d+"&url="+encodeURIComponent(b.previewer.previewUrl.get())})}}})})}(jQuery,wp.customize||null);