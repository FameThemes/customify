var AutoCSS=window.AutoCSS||null;!function(u,n){(AutoCSS=function(){this.values={},this.lastValues={},this.devices=["desktop","tablet","mobile"]})._change=!1,AutoCSS.prototype.fonts={},AutoCSS.prototype.styling_fields={color:null,image:null,position:null,cover:null,repeat:null,attachment:null,border_width:null,border_color:null,border_style:null},AutoCSS.prototype.subsets={},AutoCSS.prototype.variants={},AutoCSS.prototype.media_queries={all:"%s",desktop:"%s",tablet:"@media screen and (max-width: 1024px) { %s }",mobile:"@media screen and (max-width: 568px) { %s }"},AutoCSS.prototype.css={all:"",desktop:"",tablet:"",mobile:""},AutoCSS.prototype.box_shadow_fields={color:null,x:0,y:0,blur:0,spread:0,inset:null},AutoCSS.prototype.reset=function(){this.fonts={},this.subsets={},this.variants={},this.css={all:"",desktop:"",tablet:"",mobile:""}},AutoCSS.prototype.encodeValue=function(e){return encodeURI(JSON.stringify(e))},AutoCSS.prototype.decodeValue=function(e){return JSON.parse(decodeURI(e))},AutoCSS.prototype.loop_fields=function(e,n,i,s){_.isUndefined(i)&&(i=!1),_.isObject(n)||(n={});var o=this,r={};return _.each(e,function(e){var t=_.isUndefined(n[e.name])?null:n[e.name];if((!_.isNull(t)||!i)&&e.selector&&e.css_format)switch(e.type){case"css_ruler":r[e.name]=o.css_ruler(e,t,s);break;case"slider":r[e.name]=o.slider(e,t,s);break;case"color":r[e.name]=o.color(e,t,s);break;case"shadow":r[e.name]=o.shadow(e,t,s);break;case"checkbox":"html_class"==e.css_format?o.html_class(e,t):r[e.name]=o.checkbox(e,t,s);break;case"image":r[e.name]=o.image(e,t,s);break;case"text_align":case"text_align_no_justify":r[e.name]=o.text_align(e,t,s);break;case"font":r[e.name]=o.font(e,t,s);break;case"styling":r[e.name]=o.styling(e,t,s);break;case"typography":r[e.name]=o.typography(e,t,s);break;case"modal":o.modal(e,t);break;default:switch(e.css_format){case"background":case"styling":r[e.name]=o.styling(e,t,s);break;case"typography":r[e.name]=o.typography(e,t,s);break;case"html_class":o.html_class(e,t);break;case"html_replace":o.html_replace(e,t);break;default:r[e.name]=o.maybe_devices_setup(e,"setup_default",t,s)}}}),r},AutoCSS.prototype.run=function(e){_.isUndefined(e)&&(e=!1),this.lastValues=this.values,this.values=n.get(),window.Customify_JS&&window.Customify_JS.css_media_queries&&(this.media_queries=window.Customify_JS.css_media_queries),this.reset();var i=this;i.loop_fields(Customify_Preview_Config.fields);var s="",o=0;_.each(i.css,function(e,t){var n="";0<o&&(n="\r\n\r\n\r\n\r\n\r"),s+=n+i.media_queries[t].replace(/%s/g,e)+"\r\n",o++});var t=i.get_google_fonts_url();t&&(s="\r\n@import url('"+t+"');\r\n\r\n"+s),s=s.trim(),u("#customify-style-inline-css").length<=0&&u("head").append("<style id='customify-style-inline-css' type='text/css'></style>"),u("#customify-style-inline-css").html(s),u(document).trigger("header_builder_panel_changed",["auto_render_css"]),u(document).trigger("after_auto_render_css")},AutoCSS.prototype.get_setting=function(e,t,n){_.isUndefined(t)&&(t="desktop"),_.isUndefined(n)&&(n=!1);var i,s=null,o=!1;if(!_.isUndefined(Customify_Preview_Config.fields["setting|"+e])){var r=Customify_Preview_Config.fields["setting|"+e];o=!_.isUndefined(r.default)&&r.default}if(i=_.isUndefined(this.values[e])?o:this.values[e],_.isString(i))try{var a=this.decodeValue(i);_.isNull(a)||(i=a)}catch(e){}if(n){var l=!!_.isUndefined(i[n])&&i[n];s="all"!==t&&_.isObject(l)&&_.isObject(l)&&!_.isUndefined(l[t])?l[t]:l}else"all"!==t?_.isObject(i)&&!_.isUndefined(i[t])&&(s=i[t]):s=i;return s},AutoCSS.prototype.get_google_fonts_url=function(){var e="//fonts.googleapis.com/css?family=",n="",i=this;return!_.isEmpty(i.fonts)&&(_.each(i.fonts,function(e){n&&(n+="|"),n+=e.replace(/\s/g,"+");var t={};_.isUndefined(i.variants[e])||_.each(i.variants[e],function(e){if("regular"!==e)switch(e){case"italic":t[e]="400i";break;default:_.isString(e)?t[e]=e.replace("italic","i"):t[e]=e}}),_.isEmpty(t)||(n+=":"+i.join(t,","))}),e+=n,_.isEmpty(i.subsets)||(e+="&subset="+i.join(i.subsets,",")),e)},AutoCSS.prototype.join=function(e,t){return _.isUndefined(t)&&(t=""),_.isArray(e)?e.join(t):!_.isObject(e)||_.isEmpty(e)?"":_.values(e).join(t)},AutoCSS.prototype.str_value=function(e,t,n){if(_.isEmpty(e))return"";if(!_.isString(t))return"";_.isUndefined(n)&&(n="");var i=new RegExp("{{value}}","g"),s=t.replace(i,e),o=new RegExp("{{value_no_unit}}","g");return s=s.replace(o,n)},AutoCSS.prototype.setup_color=function(e,t){return!(!t||!e)&&this.str_value(e,t)},AutoCSS.prototype.setup_checkbox=function(e,t){return!(!t||!e)&&t},AutoCSS.prototype.setup_image=function(e,t){var n=this.sanitize_media(e);return!(!n.url||!t)&&this.str_value(n.url,t)},AutoCSS.prototype.setup_slider=function(e,t){_.isObject(e)||(e={}),(e=_.defaults(e,{unit:"px",value:null})).unit||(e.unit="px");var n="",i="";return t&&e.value&&(i=e.value+e.unit,n=this.str_value(i,t,e.value)),n},AutoCSS.prototype.setup_shadow=function(e,t){if(!_.isObject(e))return"";var n=_.defaults(e,this.box_shadow_fields),i=this.sanitize_color(n.color),s=n.inset?"inset":"";if(!i)return"";n.blur||(n.blur=0),n.spread||(n.spread=0),n.x||(n.x=0),n.y||(n.y=0);var o=n.x+"px "+n.y+"px "+n.blur+"px "+n.spread+"px "+i+" "+s;return this.str_value(o,t)},AutoCSS.prototype.setup_default=function(e,t){return!(!t||!e)&&this.str_value(e,t)},AutoCSS.prototype.setup_css_ruler=function(i,e){_.isObject(i)||(i={}),i=_.defaults(i,{unit:"",top:"",right:"",bottom:"",left:""}),_.isUndefined(i.unit)||(i.unit="px"),e=_.defaults(e,{top:"",right:"",bottom:"",left:""});var s=this,o={};return _.each(e,function(e,t){var n=i[t];n&&e&&e&&(n+=i.unit,o[t]=s.str_value(n,e))}),s.join(o,"\n\t")},AutoCSS.prototype.setup_text_align=function(e,t){return!(!t||!e)&&this.str_value(e,t)},AutoCSS.prototype.sanitize_color=function(e){return e},AutoCSS.prototype.sanitize_slider=function(e){return e=_.defaults(e,{unit:"px",value:null})},AutoCSS.prototype.sanitize_media=function(e){return _.isObject(e)||(e={}),_.defaults(e,{id:null,url:null,mime:null})},AutoCSS.prototype.maybe_devices_setup=function(i,s,o,e){var t="",r={},n=!1,a=!_.isEmpty(i.css_format)&&i.css_format,l=this;_.isUndefined(e)&&(e=!1);var u=!1;return(_.isUndefined(o)||_.isNull(o))&&(o={},u=!0),!_.isUndefined(i.device_settings)&&i.device_settings?(n=!0,_.each(l.devices,function(e){var t=null;u?t=l.get_setting(i.name,e):_.isUndefined(o[e])||(t=o[e]);var n=!1;l[s]&&(n=l[s](t,a)),n&&(r[e]=n)})):(u&&(o=l.get_setting(i.name,"all")),l[s]&&(t=l[s](o,a)),r.no_devices=t),_.isEmpty(r),t="",e?r:(n?_.each(l.devices,function(e){if(!_.isUndefined(r[e])){var t=r[e];t&&(l.css[e]+="\r\n"+i.selector+" {\r\n\t"+t+"\r\n}\r\n")}}):r.no_devices&&(l.css.all+="\r\n"+i.selector+"  {\r\n\t"+r.no_devices+"\r\n}\r\n"),t)},AutoCSS.prototype.setup_font=function(e){if(_.isObject(e)||(e={}),!(e=_.defaults(e,{font:null,type:null,variant:null,subsets:null})).font)return"";if("google"==e.type){var t;if(this.fonts[e.font]=e.font,e.variant)if(_.isUndefined(this.variants[e.font]))if(this.variants[e.font]={},_.isString(e.variant))(t={})[e.variant]=e.variant,this.variants[e.font]=_.extend(this.variants[e.font],t);else this.variants[e.font]=_.extend(this.variants[e.font],e.variant);e.subsets&&(this.subsets=_.extend(this.subsets,e.subsets))}return'font-family: "'+e.font+'";'},AutoCSS.prototype.font=function(i,s){var o="",r=this;return i.device_settings?_.each(this.devices,function(e){var t=null;_.isEmpty(s)?t=r.get_setting(i.name,e):_.isUndefined(s[e])||(e=s[e]);var n=r.setup_font(t);n&&(r.css[e]="\r\n"+i.selector+" {\r\n\t"+n+"\r\n}\r\n",o+="desktop"===e?"\r\n"+i.selector+" {\r\n\t"+n+"\r\n}":"\r\n."+e+" "+i.selector+" {\r\n\t"+n+"\r\n}\r\n")}):(_.isEmpty(s)&&(s=r.get_setting(i.name)),o=r.setup_font(s),r.css.all+=" "+i.selector+"  {\r\n\t"+o+"\r\n}\r\n",o+=" "+i.selector+"  {\r\n\t"+o+"\r\n}\r\n"),o},AutoCSS.prototype.css_ruler=function(e,t,n){return this.maybe_devices_setup(e,"setup_css_ruler",t,n)},AutoCSS.prototype.shadow=function(e,t,n){return this.maybe_devices_setup(e,"setup_shadow",t,n)},AutoCSS.prototype.slider=function(e,t,n){return this.maybe_devices_setup(e,"setup_slider",t,n)},AutoCSS.prototype.color=function(e,t,n){return this.maybe_devices_setup(e,"setup_color",t,n)},AutoCSS.prototype.checkbox=function(e,t,n){return this.maybe_devices_setup(e,"setup_checkbox",t,n)},AutoCSS.prototype.image=function(e,t,n){return this.maybe_devices_setup(e,"setup_image",t,n)},AutoCSS.prototype.text_align=function(e,t,n){return this.maybe_devices_setup(e,"setup_text_align",t,n)},AutoCSS.prototype.setup_styling_fields=function(t,e,n,i){var s,o=this,r=[];return _.isObject(n)||(n={}),_.isUndefined(i)&&(i="normal"),!1===t?r=null:(_.isObject(t)||(t={}),s={},0,_.each(e,function(e){_.isUndefined(o.box_shadow_fields[e.name])?(_.isUndefined(t[e.name])||t[e.name])&&(s[e.name]=e,_.isUndefined(n[i+"_"+e.name])?s[e.name].selector=n[i]:s[e.name].selector=n[i+"_"+e.name],0):(_.isUndefined(t[e.name])||t[e.name])&&(s[e.name]=e,s[e.name].selector=null)}),r=s),r},AutoCSS.prototype.styling=function(e){var i=this,t=this.get_setting(e.name,"all");t=_.defaults(t,{normal:{},hover:{}});var n={};_.isString(e.selector)?(n.normal=e.selector,n.hover=e.selector):n=_.defaults(e.selector,{normal:null,hover:null});var s=null,o=-1,r=-1;!_.isUndefined(e.fields)&&_.isObject(e.fields)&&(_.isUndefined(e.fields.tabs)||(s=e.tabs),_.isUndefined(e.fields.normal_fields)||(o=e.normal_fields),_.isUndefined(e.fields.hover_fields)||(r=e.hover_fields));var a=i.setup_styling_fields(o,Customify_Preview_Config.styling_config.normal_fields,n,"normal"),l=i.setup_styling_fields(r,Customify_Preview_Config.styling_config.hover_fields,n,"hover"),u=_.clone(Customify_Preview_Config.styling_config.tabs);!1===s?u.hover=!1:_.isObject(s)&&(u=s);var c=function(e,t){_.each(e,function(n,e){_.isUndefined(f[n.selector])&&(f[n.selector]=""),_.isUndefined(t[e])||(_.isUndefined(t[e].no_devices)?_.each(t[e],function(e,t){_.isUndefined(d[t])&&(d[t]={}),_.isUndefined(d[t][n.selector])&&(d[t][n.selector]=""),e&&(d[t][n.selector]+=e)}):t[e].no_devices&&(f[n.selector]+=t[e].no_devices))})},f={},d={},p=i.loop_fields(a,t.normal,!0,!0),h=i.loop_fields(l,t.hover,!0,!0);c(a,p),c(l,h),_.each(f,function(e,t){i.css.all+="\r\n"+t+"  {\r\n\t"+e+"\r\n}\r\n"}),_.each(i.devices,function(e){var n="";if(!_.isUndefined(d[e])){var t=d[e];_.each(t,function(e,t){_.isString(e)?n+="\r\n"+t+"  {\r\n\t"+e+"\r\n}\r\n":n+="\r\n"+t+"  {\r\n\t"+i.join(e,"\n")+"\r\n}\r\n"})}i.css[e]+=n})},AutoCSS.prototype.modal=function(n){var i=this,s=this.get_setting(n.name,"all");_.isObject(s)||(s={}),_.isObject(n.fields.tabs)&&_.each(n.fields.tabs,function(e,t){_.isObject(n.fields[t+"_fields"])&&i.loop_fields(n.fields[t+"_fields"],s[t])})},AutoCSS.prototype.setup_font_style=function(e){_.isObject(e)||(e={});var t={};(e=_.defaults(e,{b:null,i:null,u:null,s:null,t:null})).b&&(t.b="font-weight: bold;"),e.i&&(t.i="font-style: italic;");var n={};return e.u&&(n.underline="underline"),e.s&&(n["line-through"]="line-through"),_.isEmpty(n)||(t.d="text-decoration: "+this.join(n," ")+";"),e.t&&(t.t="text-transform: uppercase;"),this.join(t,"\r\n\t")},AutoCSS.prototype.html_replace=function(e,t){var n=e.selector,i=_.clone(t);(_.isUndefined(i)||_.isEmpty(i))&&(i=e.default),u(n).html(i)},AutoCSS.prototype.html_class=function(i,e){var t;t=_.isUndefined(e)?_.clone(e):this.get_setting(i.name,"all");var s=i.selector,n=null,o="checkbox"===i.type;if(_.isUndefined(this.lastValues[i.name])||(n=this.lastValues[i.name]),_.isString(n))try{var r=this.decodeValue(n);_.isNull(r)||(n=r)}catch(e){}if(o&&(_.isUndefined(i.device_settings)||!i.device_settings)){var a,l=i.name.split("__");return a=1<l.length?l[1]+"-active":i.name+"-active",void(t?u(s).addClass(a):u(s).removeClass(a))}_.isString(n)&&!_.isEmpty(n)?u(s).removeClass(n):_.isObject(n)&&_.each(n,function(e,t){if(e){var n=t+"--"+e;o&&(n=i.name+"-"+n),u(s).removeClass(n)}}),_.isString(t)?u(s).addClass(t):_.isObject(t)&&_.each(t,function(e,t){if(e){var n=t+"--"+e;o&&(n=i.name+"-"+n),u(s).addClass(n)}})},AutoCSS.prototype.typography=function(n,e){!_.isUndefined(e)&&_.isObject(e)||(e=this.get_setting(n.name,"all"));var i=this;_.isObject(e)||(e={}),e=_.defaults(e,{font:null,font_type:null,languages:null,font_size:null,font_weight:null,line_height:null,letter_spacing:null,style:null,text_decoration:null,text_transform:null});var s={},t={},o={};if(_.each(Customify_Preview_Config.typo_fields,function(e){t[e.name]=e}),_.isUndefined(t.font)||(s.font=this.setup_font({font:e.font,type:e.font_type,subsets:e.languages,variant:e.font_weight})),_.isUndefined(t.style)||e.style&&"default"!==e.style&&(s.style="font-style: "+e.style+";"),_.isUndefined(t.font_weight)||e.font_weight&&"default"!==e.font_weight&&"default"!==e.font_weight&&(s.font_weight="font-weight: "+e.font_weight+";"),_.isUndefined(t.text_decoration)||e.text_decoration&&"default"!==e.text_decoration&&(s.text_decoration="text-decoration: "+e.text_decoration+";"),_.isUndefined(t.text_transform)||e.text_transform&&"default"!==e.text_transform&&(s.text_transform="text-transform: "+e.text_transform+";"),!_.isUndefined(t.font_size)){t.font_size.css_format="font-size: {{value}};";var r=this.maybe_devices_setup(t.font_size,"setup_slider",e.font_size,!0);_.isEmpty(r)||(_.isUndefined(r.no_devices)?_.each(r,function(e,t){"desktop"==t?s.font_size=e:(_.isUndefined(o[t])&&(o[t]={}),o[t].font_size=e)}):s.font_size=r.no_devices)}if(!_.isUndefined(t.line_height)){t.line_height.css_format="line-height: {{value}};";var a=this.maybe_devices_setup(t.line_height,"setup_slider",e.line_height,!0);_.isEmpty(a)||(_.isUndefined(a.no_devices)?_.each(a,function(e,t){"desktop"==t?s.line_height=e:(_.isUndefined(o[t])&&(o[t]={}),o[t].line_height=e)}):s.line_height=a.no_devices)}if(!_.isUndefined(t.letter_spacing)){t.letter_spacing.css_format="letter-spacing: {{value}};";var l=this.maybe_devices_setup(t.letter_spacing,"setup_slider",e.letter_spacing,!0);l&&(_.isUndefined(l.no_devices)?_.each(l,function(e,t){"desktop"==t?s.letter_spacing=e:(_.isUndefined(o[t])&&(o[t]={}),o[t].letter_spacing=e)}):s.letter_spacing=l.no_devices)}_.each(o,function(e,t){i.css[t]+=" "+n.selector+" {\r\n\t"+i.join(e,"\r\n\t")+"\r\n}"}),i.css.all+=" "+n.selector+" {\r\n\t"+i.join(s,"\r\n\t")+"\r\n}"};var i=new AutoCSS;n.bind("preview-ready",function(){i.lastValues=n.get(),i.values=n.get()}),n.bind("change",function(){}),_.each(Customify_Preview_Config.fields,function(t){(t.selector&&t.css_format||"modal"===t.type)&&wp.customize(t.name,function(e){e.bind(function(e){i.run(t.name)})})})}(jQuery,wp.customize);