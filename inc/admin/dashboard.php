<?php

class Customify_Dashboard {
    public $title;
    public $config;
    function __construct()
    {
        $this->title = __( 'Customify Options', 'customify' );
        add_action( 'admin_menu', array( $this, 'add_menu' ) );
        add_action( 'admin_enqueue_scripts', array( $this, 'scripts' ) );
    }
    function add_menu(){
        add_theme_page(
            $this->title,
            $this->title,
            'manage_options',
            'customify',
            array( $this, 'page' )
        );
    }

    function scripts( $id ){
       if ( $id != 'appearance_page_customify' ) {
           return ;
       }
        wp_enqueue_style( 'customify-admin',  get_template_directory_uri() . '/assets/css/admin/dashboard.css', false, Customify::$version );
    }

    function setup(){
        $theme = wp_get_theme();
        $this->config = array(
            'name' => $theme->get('Name'),
            'theme_uri' => $theme->get('ThemeURI'),
            'desc' => $theme->get('Description'),
            'author' => $theme->get('Author'),
            'author_uri' => $theme->get('AuthorURI'),
            'version' => $theme->get('Version'),
        );
    }

    function page(){
        $this->setup();
        $this->page_header();
        echo '<div class="wrap">';
        $this->page_inner();
        echo '</div>';
    }

    private function page_header(){
        ?>
        <div class="cd-header">
            <div class="cd-row">
                <div class="cd-header-inner">
                    <a href="#" class="cd-branding">
                        <svg width="159px" height="43px" viewBox="0 0 159 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="Desktop-HD" transform="translate(-20.000000, -908.000000)" fill="#23282D">
                                    <g id="Header">
                                        <g id="Logo" transform="translate(20.000000, 908.000000)">
                                            <path d="M61.3486328,25.0839844 L61.3740234,25.1601562 C61.4078778,26.895191 60.7985089,28.3466738 59.5458984,29.5146484 C58.293288,30.682623 56.6386822,31.2666016 54.5820312,31.2666016 C52.491526,31.2666016 50.7882553,30.5260491 49.472168,29.0449219 C48.1560807,27.5637947 47.4980469,25.6849072 47.4980469,23.4082031 L47.4980469,20.1201172 C47.4980469,17.8434131 48.1560807,15.9624098 49.472168,14.4770508 C50.7882553,12.9916918 52.491526,12.2490234 54.5820312,12.2490234 C56.6725365,12.2490234 58.3356058,12.8054957 59.5712891,13.918457 C60.8069723,15.0314183 61.4078778,16.5061757 61.3740234,18.3427734 L61.3486328,18.4189453 L58.9492188,18.4189453 C58.9492188,17.124017 58.5683632,16.0999387 57.8066406,15.3466797 C57.0449181,14.5934207 55.970059,14.2167969 54.5820312,14.2167969 C53.1855399,14.2167969 52.0725953,14.7796168 51.2431641,15.9052734 C50.4137328,17.0309301 49.9990234,18.4274005 49.9990234,20.0947266 L49.9990234,23.4082031 C49.9990234,25.0924563 50.4137328,26.4973902 51.2431641,27.6230469 C52.0725953,28.7487035 53.1855399,29.3115234 54.5820312,29.3115234 C55.970059,29.3115234 57.0449181,28.9370155 57.8066406,28.1879883 C58.5683632,27.4389611 58.9492188,26.4043035 58.9492188,25.0839844 L61.3486328,25.0839844 Z M72.1029297,28.96875 C71.6712869,29.7050818 71.1169305,30.2721334 70.4398438,30.6699219 C69.7627571,31.0677103 68.9798873,31.2666016 68.091211,31.2666016 C66.5931566,31.2666016 65.4251995,30.7884162 64.5873047,29.8320312 C63.7494099,28.8756463 63.3304688,27.3860778 63.3304688,25.3632812 L63.3304688,17.2636719 L65.8314453,17.2636719 L65.8314453,25.3886719 C65.8314453,26.8528719 66.0472635,27.8600233 66.4789063,28.4101562 C66.9105491,28.9602892 67.5833939,29.2353516 68.497461,29.2353516 C69.3861373,29.2353516 70.1203422,29.0555031 70.7000977,28.6958008 C71.2798532,28.3360985 71.7178371,27.8261752 72.0140625,27.1660156 L72.0140625,17.2636719 L74.5150391,17.2636719 L74.5150391,31 L72.2679688,31 L72.1029297,28.96875 Z M85.2439454,27.3564453 C85.2439454,26.8063124 85.0344748,26.3535174 84.6155274,25.9980469 C84.19658,25.6425763 83.4031309,25.3336602 82.2351563,25.0712891 C80.5678303,24.707355 79.3131227,24.2143586 78.4709961,23.5922852 C77.6288695,22.9702117 77.2078125,22.1217502 77.2078125,21.046875 C77.2078125,19.9296819 77.6817661,18.977543 78.6296875,18.1904297 C79.577609,17.4033164 80.8132737,17.0097656 82.3367188,17.0097656 C83.9363362,17.0097656 85.2079706,17.4202433 86.1516602,18.2412109 C87.0953498,19.0621786 87.5460289,20.0608665 87.503711,21.2373047 L87.4783204,21.3134766 L85.0916016,21.3134766 C85.0916016,20.7125621 84.8398138,20.1730167 84.3362305,19.6948242 C83.8326473,19.2166317 83.16615,18.9775391 82.3367188,18.9775391 C81.4480425,18.9775391 80.7878928,19.1721986 80.35625,19.5615234 C79.9246073,19.9508483 79.7087891,20.4205702 79.7087891,20.9707031 C79.7087891,21.5123725 79.8992169,21.9397771 80.2800782,22.2529297 C80.6609395,22.5660823 81.4353458,22.8453764 82.6033204,23.0908203 C84.3383551,23.463218 85.6290323,23.9689096 86.4753907,24.6079102 C87.3217491,25.2469107 87.7449219,26.1038358 87.7449219,27.1787109 C87.7449219,28.397467 87.2519256,29.3834598 86.265918,30.1367188 C85.2799105,30.8899777 83.9913491,31.2666016 82.4001954,31.2666016 C80.6482335,31.2666016 79.26869,30.8222701 78.2615235,29.9335938 C77.254357,29.0449174 76.7761717,28.0081439 76.8269532,26.8232422 L76.8523438,26.7470703 L79.2390625,26.7470703 C79.2813805,27.6357466 79.6114553,28.285317 80.2292969,28.6958008 C80.8471386,29.1062846 81.5707641,29.3115234 82.4001954,29.3115234 C83.2888717,29.3115234 83.984991,29.131675 84.4885743,28.7719727 C84.9921575,28.4122703 85.2439454,27.9404326 85.2439454,27.3564453 Z M93.2560548,13.9501953 L93.2560548,17.2636719 L95.8585938,17.2636719 L95.8585938,19.1171875 L93.2560548,19.1171875 L93.2560548,27.4580078 C93.2560548,28.1012402 93.3893542,28.5540351 93.6559571,28.8164062 C93.92256,29.0787774 94.2759093,29.2099609 94.7160157,29.2099609 C94.8598966,29.2099609 95.0185864,29.193034 95.1920899,29.1591797 C95.3655934,29.1253254 95.5200515,29.0830081 95.6554688,29.0322266 L95.9855469,30.7460938 C95.7993481,30.8984383 95.5264016,31.0232743 95.1666993,31.1206055 C94.806997,31.2179367 94.4451842,31.2666016 94.0812501,31.2666016 C93.06562,31.2666016 92.2573598,30.9598012 91.6564454,30.3461914 C91.0555309,29.7325816 90.7550782,28.7698633 90.7550782,27.4580078 L90.7550782,19.1171875 L88.5714844,19.1171875 L88.5714844,17.2636719 L90.7550782,17.2636719 L90.7550782,13.9501953 L93.2560548,13.9501953 Z M97.4595704,24.0048828 C97.4595704,21.9736227 98.0096951,20.299974 99.109961,18.9838867 C100.210227,17.6677994 101.704027,17.0097656 103.591406,17.0097656 C105.495713,17.0097656 107.000092,17.6656835 108.10459,18.9775391 C109.209088,20.2893946 109.761328,21.9651591 109.761328,24.0048828 L109.761328,24.2841797 C109.761328,26.332367 109.211204,28.0081315 108.110938,29.3115234 C107.010672,30.6149154 105.51264,31.2666016 103.616797,31.2666016 C101.720954,31.2666016 100.220806,30.6127995 99.1163087,29.3051758 C98.011811,27.9975521 97.4595704,26.3239034 97.4595704,24.2841797 L97.4595704,24.0048828 Z M99.960547,24.2841797 C99.960547,25.7399161 100.267347,26.941727 100.880957,27.8896484 C101.494567,28.8375698 102.406504,29.3115234 103.616797,29.3115234 C104.810162,29.3115234 105.715752,28.8375698 106.333594,27.8896484 C106.951435,26.941727 107.260352,25.7399161 107.260352,24.2841797 L107.260352,24.0048828 C107.260352,22.5660735 106.94932,21.3684944 106.327246,20.4121094 C105.705173,19.4557244 104.793235,18.9775391 103.591406,18.9775391 C102.398041,18.9775391 101.494567,19.4557244 100.880957,20.4121094 C100.267347,21.3684944 99.960547,22.5660735 99.960547,24.0048828 L99.960547,24.2841797 Z M114.155274,17.2636719 L114.333008,19.0664062 C114.781578,18.4147103 115.350745,17.9090187 116.040527,17.5493164 C116.73031,17.1896141 117.532222,17.0097656 118.446289,17.0097656 C119.360356,17.0097656 120.145342,17.2213521 120.80127,17.6445312 C121.457197,18.0677104 121.950194,18.7024697 122.280274,19.5488281 C122.711916,18.7701784 123.2832,18.152346 123.994141,17.6953125 C124.705082,17.238279 125.534501,17.0097656 126.482422,17.0097656 C127.878913,17.0097656 128.983394,17.4900668 129.795899,18.4506836 C130.608403,19.4113004 131.014649,20.8564357 131.014649,22.7861328 L131.014649,31 L128.513672,31 L128.513672,22.7607422 C128.513672,21.4065687 128.280927,20.4480822 127.81543,19.8852539 C127.349933,19.3224256 126.655929,19.0410156 125.733399,19.0410156 C124.878577,19.0410156 124.186689,19.3372366 123.657715,19.9296875 C123.128741,20.5221384 122.817709,21.2711543 122.724609,22.1767578 L122.724609,31 L120.210938,31 L120.210938,22.7607422 C120.210938,21.4742774 119.971845,20.5327178 119.493652,19.9360352 C119.01546,19.3393525 118.327804,19.0410156 117.430664,19.0410156 C116.668942,19.0410156 116.042646,19.1975896 115.551758,19.5107422 C115.06087,19.8238948 114.684246,20.2639946 114.421875,20.8310547 L114.421875,31 L111.920899,31 L111.920899,17.2636719 L114.155274,17.2636719 Z M136.44961,31 L133.948633,31 L133.948633,17.2636719 L136.44961,17.2636719 L136.44961,31 Z M136.44961,13.7470703 L133.948633,13.7470703 L133.948633,11.1953125 L136.44961,11.1953125 L136.44961,13.7470703 Z M140.437305,31 L140.437305,19.1171875 L138.291797,19.1171875 L138.291797,17.2636719 L140.437305,17.2636719 L140.437305,15.5244141 C140.437305,14.060214 140.820276,12.9282267 141.586231,12.128418 C142.352185,11.3286093 143.420696,10.9287109 144.791797,10.9287109 C145.079559,10.9287109 145.369432,10.9519854 145.661426,10.9985352 C145.95342,11.0450849 146.277147,11.1106767 146.632617,11.1953125 L146.32793,13.0996094 C146.175585,13.065755 145.991505,13.0361329 145.775684,13.0107422 C145.559862,12.9853514 145.333465,12.9726562 145.096485,12.9726562 C144.368616,12.9726562 143.826955,13.1905903 143.471485,13.6264648 C143.116014,14.0623394 142.938281,14.6949828 142.938281,15.5244141 L142.938281,17.2636719 L145.794727,17.2636719 L145.794727,19.1171875 L142.938281,19.1171875 L142.938281,31 L140.437305,31 Z M151.674024,25.9091797 L152.11836,27.6357422 L152.194531,27.6357422 L155.571485,17.2636719 L158.351758,17.2636719 L152.575391,33.1074219 C152.228384,34.0299525 151.731156,34.8339809 151.083692,35.5195312 C150.436227,36.2050816 149.562375,36.5478516 148.46211,36.5478516 C148.258984,36.5478516 148.000848,36.5245771 147.687696,36.4780273 C147.374543,36.4314776 147.133334,36.3870445 146.964063,36.3447266 L147.217969,34.3769531 C147.167187,34.3684895 147.317414,34.376953 147.668653,34.4023438 C148.019891,34.4277345 148.242057,34.4404297 148.335156,34.4404297 C148.868362,34.4404297 149.30423,34.2034529 149.642774,33.7294922 C149.981317,33.2555315 150.264843,32.7307971 150.49336,32.1552734 L151.090039,30.7207031 L145.986524,17.2636719 L148.779492,17.2636719 L151.674024,25.9091797 Z" id="Customify" fill-opacity="0.9"></path>
                                            <g id="C-Letter-Logo2" fill-rule="nonzero">
                                                <path d="M22.729988,35.8642295 C17.6366931,32.3455497 7.75291474,25.8185331 2.5386513,22.239418 C-0.446539556,24.3085897 -0.846646182,26.8325038 1.5914548,28.5181125 C7.95101695,32.9165518 14.3095819,37.3165579 20.6671496,41.7181308 C22.2168473,42.7925368 23.8132416,42.8336328 25.3651506,41.7607041 C28.663819,39.4801878 31.9602762,37.1962244 35.2545221,34.9088139 C36.8048702,33.8344079 38.3133346,32.7923684 40,31.6254291 L35.0627935,28.1295805 C31.4809547,30.6056835 23.0487986,36.066755 23.0487986,36.066755 L22.729988,35.8653039 L22.729988,35.8642295 Z" id="Shape"></path>
                                                <path d="M27.3751634,19.3386243 C27.3751634,19.3386243 27.7536546,19.0713899 27.9703975,18.9122292 C29.1802754,18.0222971 31.0889063,16.7071766 32.3401918,15.880131 L32.3809524,15.8513024 L32.3473087,15.8298485 C29.8085061,14.1135412 26.6202514,11.8933368 24.1115986,10.1299651 C23.2534264,9.52657581 22.4323916,9.5107536 21.5793953,10.1132043 C20.7181175,10.7215548 19.8444175,11.310865 18.9793871,11.9135839 C17.1256212,13.2053733 15.2739257,14.5003808 13.3333333,15.8557272 C14.9183381,16.9581865 16.8029009,18.2604347 18.2798577,19.3173046 C18.2798577,19.3173046 18.6575725,19.0506065 18.8246263,18.9332808 C19.9228331,18.161747 20.6770981,17.6058244 22.114459,16.6135842 C22.3836083,16.4038729 22.8235639,16.1243025 22.8235639,16.1243025 L27.3751634,19.3386243 Z" id="Shape"></path>
                                                <path d="M39.9896823,21.9682088 C35.3993405,25.111153 30.9567997,28.153005 26.513872,31.194462 C26.0432992,31.5166938 25.5716086,31.8374337 25.0988003,32.1566818 C23.6856633,33.1104773 22.2453133,33.1167955 20.8520378,32.1666858 C14.3062351,27.7019507 7.76894463,23.2246669 1.24016622,18.7348343 C-0.367072462,17.5527914 -0.449356067,15.3602202 1.21192153,14.1952892 C7.76546241,9.6868528 14.3305247,5.19579164 20.9071084,0.72210573 C22.0982861,-0.0900551788 23.4261733,-0.298163185 24.6489489,0.519394579 C29.7562071,3.86110106 34.8118769,7.40367587 40,10.9299285 C38.2797826,12.11105 36.3987381,13.385366 34.7958844,14.5055426 C31.2878687,12.113551 26.4937525,8.8384496 22.9957965,6.43211028 C18.4375685,9.59203488 13.2610528,13.083537 8.68747729,16.2205579 C8.58894331,16.288216 8.33989999,16.4613103 8.33989999,16.4613103 C12.3525799,19.2076515 16.3580374,21.9714995 20.3416988,24.6750608 C21.2259252,25.2751648 23.0972968,26.4506262 23.0972968,26.4506262 C23.0972968,26.4506262 33.8782546,18.9274099 34.7404268,18.3373098 L35.039511,18.5623982 L39.9896823,21.9682088 Z" id="Shape"></path>
                                            </g>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </a>
                    <span class="cd-version"><?php echo esc_html( $this->config['version'] ); ?></span>
                </div>
            </div>
        </div>
        <?php
    }
    private function page_inner(){

        $url = admin_url( 'customize.php' ); //

        $links = array(
            array(
                'label' => __( 'Logo & Site Identity', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'section' => 'title_tagline' ) ), $url ),
            ),
	        array(
		        'label' => __( 'Layout Settings', 'customify' ),
		        'url' => add_query_arg( array( 'autofocus' => array( 'section' => 'global_layout_section' ) ), $url ),
	        ),
	        array(
		        'label' => __( 'Header Builder', 'customify' ),
		        'url' => add_query_arg( array( 'autofocus' => array( 'panel' => 'header_settings' ) ), $url ),
	        ),
	        array(
		        'label' => __( 'Footer Builder', 'customify' ),
		        'url' => add_query_arg( array( 'autofocus' => array( 'panel' => 'footer_settings' ) ), $url ),
	        ),
            array(
                'label' => __( 'Styling', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'panel' => 'styling_panel' ) ), $url ),
            ),
            array(
                'label' => __( 'Typography', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'panel' => 'typography_panel' ) ), $url ),
            ),
            array(
                'label' => __( 'Sidebar Settings', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'section' => 'sidebar_layout_section' ) ), $url ),
            ),
            array(
                'label' => __( 'Titlebar Settings', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'section' => 'titlebar' ) ), $url ),
            ),

            array(
                'label' => __( 'Blog Posts', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'panel' => 'blog_panel' ) ), $url ),
            ),
            array(
                'label' => __( 'Homepage Settings', 'customify' ),
                'url' => add_query_arg( array( 'autofocus' => array( 'section' => 'static_front_page' ) ), $url ),
            )

        );
        ?>
        <div class="cd-row metabox-holder">
            <h1 class="cd-hidden-heading"">&nbsp;</h1>
            <div class="cd-main">

                <div class="cd-box">
                    <div class="cd-box-top"><?php _e( 'Links to Customizer Settings', 'customify' ); ?></div>
                    <div class="cd-box-content">
                        <ul class="cd-list-flex">
                            <?php foreach( $links as $l ) { ?>
                            <li class="">
                                <a class="cd-quick-setting-link" href="<?php echo esc_url( $l['url'] ); ?>" target="_blank" rel="noopener"><?php echo esc_html( $l['label'] ); ?></a>
                            </li>
                            <?php } ?>
                        </ul>
                    </div>
                </div>

                <?php do_action( 'customify/dashboard/main', $this ); ?>
            </div>
            <div class="cd-sidebar">

                <div class="cd-box">
                    <div class="cd-box-top">Join the community!</div>
                    <div class="cd-box-content">
                        <p><?php _e( 'Join the Facebook group for updates, discussions, chat with other Customify lovers.', 'customify' ) ?></p>
                        <a href="https://www.facebook.com/groups/133106770857743"><?php _e( 'Join Our Facebook Group »', 'customify' ); ?></a>
                    </div>
                </div>

                <?php do_action( 'customify/dashboard/sidebar', $this ); ?>

            </div>
        </div>
    <?php
    }

}

new Customify_Dashboard();


